{"version":3,"sources":["shared/NavBar.js","helpers/Global.js","helpers/Form.js","shared/Message.js","shared/BaseComponent.js","list/Customers.js","add/Confirmations.js","add/Rules.js","add/RulesForm.js","shared/NumericInput.js","add/ProductsForm.js","add/CustomerForm.js","add/CustomerAdd.js","App.js","serviceWorker.js","index.js"],"names":["MainTitle","styled","Typography","flexGrow","NavBar","react_default","a","createElement","AppBar_default","position","Toolbar_default","variant","color","Link","to","Button_default","Component","API_URL","validatejs","validators","presence","options","message","email","createFormError","form","obj","Object","keys","forEach","key","concat","validate","objNames","state","constraints","errorObj","names","Array","isArray","Error","getFormFieldNames","field","constraint","name","result","fullMessages","Content","SnackbarContent","_ref","backgroundColor","bg","div:first-child","flex","ContentMessage","display","alignItems","Icon","MuiIcon","_ref2","clr","marginRight","fontSize","MessageIcon","_ref3","Message_Icon","variantIcon","success","error","variantColor","green","variantAutoHide","Message","props","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","type","open","nextProps","_this$props","msg","typ","setState","event","reason","_this2","_this$state","iconName","duration","Snackbar_default","autoHideDuration","onClose","handleClose","component","Message_MessageIcon","action","IconButton_default","onClick","LoaderContent","div","justifyContent","minHeight","BaseComponent","loading","messageType","mapConstraintsToForm","values","some","s","CircularProgress_default","size","shared_Message","maxWidth","margin","Card","MuiCard","padding","marginBottom","CardContent","MuiCardContent","SubTitle","CreatedDate","marginTop","Rule","li","lineHeight","Price","JobsPage","customers","Promise","all","fetchCustomers","fetchAds","ads","fetch","response","json","id","find","ad","rule","deal","discount","bundle","findAd","price","get","replace","qty","rules","length","map","renderRuleAds","cust","_this3","adIds","createdAt","totalAmount","Customers_Card","Customers_CardContent","Typography_default","gutterBottom","join","renderRules","moment","format","_this4","Customers_Content","renderCustomer","renderLoader","renderCustomers","Divider","MuiDivider","CofirmationDialog","total","customer","submit","Dialog_default","DialogTitle_default","DialogContent_default","Confirmations_SubTitle","Confirmations_Divider","DialogActions_default","autoFocus","InputsContent","gridTemplateColumns","gridGap","AdsContent","DeleteButton","IconButton","width","height","marginLeft","RULE","RULES","value","text","Rules","getDefaultRule","formError","objectSpread","prototype","assertThisInitialized","mode","value1","value2","FormControl_default","fullWidth","InputLabel_default","Select_default","onChange","target","ruleChanged","input","OutlinedInput_default","labelWidth","r","MenuItem_default","renderBothInputs","renderDiscountInputs","labels","TextField_default","label","value1Error","helperText","_ref4","_this5","adChanged","removeRule","Delete_default","_this$state2","found","maxLength","allowLogo","priority","e","remove","renderAds","renderAdContent","renderPriceRule","renderPriceScenario","Rules_Divider","allowEmpty","MainButton","Button","RulesForm","console","log","push","undefined","index","splice","back","prepareRule","preventDefault","onSubmit","request","preparePriceRules","addRule","addedRule","add_Rules","InputContent","AddButton","top","right","MinusButton","NumericInput","Math","max","InputProps","readOnly","plus","Add_default","minus","Remove_default","AdContent","justifyItems","ProductsForm","reduce","prev","fill","checkOut","shared_NumericInput","updateAdValue","ProductsForm_MainButton","CustomerForm","nameError","validateForm","addCustomer","CustomerForm_MainButton","MuiPaper","CustomerAddPage","step","confirmation","fetchTotal","postCustomer","history","method","headers","Accept","Content-Type","body","JSON","stringify","Stepper_default","activeStep","orientation","renderCustomerForm","renderRulesForm","renderProductsForm","Step_default","StepLabel_default","StepContent_default","add_CustomerForm","add_RulesForm","addedRules","add_ProductsForm","updatedAds","_this$state3","CustomerAdd_Content","elevation","renderStepper","Confirmations","renderMessage","renderForm","generateClassName","createGenerateClassName","jss","create","jssPreset","insertionPoint","document","getElementById","Root","App","JssProvider_default","BrowserRouter","shared_NavBar","Route","exact","path","CustomersPage","Boolean","window","location","hostname","match","ReactDOM","render","src_App","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"qYAQMA,EAAYC,YAAOC,IAAPD,CAAmB,CACnCE,SAAU,IAoBGC,mLAfX,OACEC,EAAAC,EAAAC,cAACC,EAAAF,EAAD,CAAQG,SAAS,UACfJ,EAAAC,EAAAC,cAACG,EAAAJ,EAAD,KACED,EAAAC,EAAAC,cAACP,EAAD,CAAWW,QAAQ,KAAKC,MAAM,WAC5BP,EAAAC,EAAAC,cAACM,EAAA,EAAD,CAAMC,GAAG,KAAT,YAEFT,EAAAC,EAAAC,cAACM,EAAA,EAAD,CAAMC,GAAG,QACPT,EAAAC,EAAAC,cAACQ,EAAAT,EAAD,CAAQM,MAAM,WAAd,0BATSI,mFCZRC,EAAU,gECEvBC,IAAWC,WAAWC,SAASC,QAAU,CAACC,QAAS,2BACnDJ,IAAWC,WAAWI,MAAMF,QAAU,CAACC,QAAS,wBAEhD,IAAME,EAAkB,SAACC,GACvB,IAAMC,EAAM,GAIZ,OAHAC,OAAOC,KAAKH,GAAMI,QAAQ,SAACC,GACzBJ,EAAG,GAAAK,OAAID,EAAJ,UAAkB,KAEhBJ,GAmBHM,EAAW,SAACC,EAAUC,EAAOC,GACjC,IAAMC,EAAW,GACXC,EAlBkB,SAACA,GACzB,GAAIC,MAAMC,QAAQF,GAChB,OAAOA,EAGT,GAAqB,kBAAVA,EACT,MAAO,CAACA,GAGV,GAAqB,kBAAVA,EACT,OAAOV,OAAOC,KAAKS,GAGrB,MAAM,IAAIG,MAAM,sBAAuBH,GAKzBI,CAAkBR,IAAa,GAEvCS,EAAQ,GACRC,EAAa,GACnBN,EAAMR,QAAQ,SAACe,GACbF,EAAME,GAAQV,EAAMU,GACpBD,EAAWC,GAAQT,EAAYS,KAGjC,IAAMC,EAAS3B,IAAWc,SAASU,EAAOC,EAAY,CAACG,cAAc,KAAW,GAIhF,OAHAT,EAAMR,QAAQ,SAACe,GACbR,EAAQ,GAAAL,OAAIa,EAAJ,UAAmBC,EAAOD,GAAQC,EAAOD,GAAM,GAAK,KAEvDR,8FCnCHW,GAAU9C,YAAO+C,IAAP/C,CAAwB,SAAAgD,GAAA,MAAW,CACjDC,gBADsCD,EAAEE,GAGxCC,kBAAmB,CACjBC,KAAM,MAIJC,GAAiBrD,YAAOC,IAAPD,CAAmB,CACxCsD,QAAS,OACTC,WAAY,SACZH,KAAM,IAGFI,GAAOxD,YAAOyD,IAAPzD,CAAgB,SAAA0D,GAAA,MAAkB,CAC7C/C,MAD2B+C,EAAEC,IAE7BC,YAAsB,UAFKF,EAAOf,KAEF,EAAI,GACpCkB,SAAU,MAGNC,GAAc,SAAAC,GAAA,IAAEpB,EAAFoB,EAAEpB,KAAMgB,EAARI,EAAQJ,IAAR,OAClBvD,EAAAC,EAAAC,cAAC0D,GAAD,CAAML,IAAKA,EAAKhB,KAAMA,GACnBA,IAICsB,GAAc,CAClBC,QAAS,eACTC,MAAO,SAGHC,GAAe,CACnBF,QAASG,IAAM,KACfF,MAAO,WAGHG,GAAkB,CACtBJ,QAAS,IACTC,MAAO,KA8DMI,eA1Db,SAAAA,EAAYC,GAAO,IAAAC,EAAA/C,OAAAgD,EAAA,EAAAhD,CAAAiD,KAAAJ,GACjBE,EAAA/C,OAAAkD,EAAA,EAAAlD,CAAAiD,KAAAjD,OAAAmD,EAAA,EAAAnD,CAAA6C,GAAAO,KAAAH,KAAMH,IADW,IAEVnD,EAAiBmD,EAAjBnD,QAAS0D,EAAQP,EAARO,KAFC,OAGjBN,EAAKxC,MAAQ,CACX+C,OAAQ3D,EACRA,UACA0D,QANeN,yFAUOQ,GAAW,IAC5B5D,EAAiB4D,EAAjB5D,QAAS0D,EAAQE,EAARF,KADmBG,EAEDP,KAAKH,MAAvBW,EAFmBD,EAE5B7D,QAAoB+D,EAFQF,EAEdH,KACjBI,IAAQ9D,GACVsD,KAAKU,SAAS,CAAChE,UAAS2D,OAAQ3D,IAG9B+D,IAAQL,GACVJ,KAAKU,SAAS,CAACN,6CAIPO,EAAOC,GACF,cAAXA,GAIJZ,KAAKU,SAAS,CAACL,MAAM,qCAGd,IAAAQ,EAAAb,KAAAc,EACuBd,KAAK1C,MAA5BZ,EADAoE,EACApE,QAAS0D,EADTU,EACSV,KAAMC,EADfS,EACeT,KAChBtE,EAAUqE,GAAQ,UAClBW,EAAWzB,GAAYvD,GACvBC,EAAQyD,GAAa1D,GACrBiF,EAAWrB,GAAgB5D,GAEjC,OACEN,EAAAC,EAAAC,cAACsF,EAAAvF,EAAD,CAAU2E,KAAMA,EAAMa,iBAAkBF,EAAUG,QAAS,kBAAMN,EAAKO,gBACpE3F,EAAAC,EAAAC,cAACwC,GAAD,CACEI,GAAIvC,EACJU,QACEjB,EAAAC,EAAAC,cAAC+C,GAAD,CAAgB1C,MAAM,UAAUqF,UAAU,QACxC5F,EAAAC,EAAAC,cAAC2F,GAAD,CAAatD,KAAM+C,IAClBrE,GAGL6E,OAAQ,CACN9F,EAAAC,EAAAC,cAAC6F,GAAA9F,EAAD,CAAYwB,IAAI,QAAQlB,MAAM,UAAUyF,QAAS,kBAAMZ,EAAKO,gBAC1D3F,EAAAC,EAAAC,cAAC2F,GAAD,CAAatD,KAAK,sBAlDV5B,aC5ChBsF,GAAgBrG,IAAOsG,IAAI,CAC/BhD,QAAS,OACTC,WAAY,SACZgD,eAAgB,SAChBC,UAAW,MAgDEC,eAtCb,SAAAA,EAAYjC,EAAOtC,GAAa,IAAAuC,EAAA,OAAA/C,OAAAgD,EAAA,EAAAhD,CAAAiD,KAAA8B,IAC9BhC,EAAA/C,OAAAkD,EAAA,EAAAlD,CAAAiD,KAAAjD,OAAAmD,EAAA,EAAAnD,CAAA+E,GAAA3B,KAAAH,KAAMH,KAPRvC,MAAQ,CACNyE,SAAS,EACTrF,QAAS,GACTsF,YAAa,IAKblC,EAAKvC,YAAcA,EACnBuC,EAAKjD,KAAOiD,EAAKmC,qBAAqB1E,GAHRuC,oFAMXvC,GACnB,IAAMV,EAAO,GAIb,OAHAE,OAAOC,KAAKO,GAAaN,QAAQ,SAACC,GAChCL,EAAKK,GAAO,KAEPL,yCAIP,IAAM2C,EAAQpC,EAAS4C,KAAKnD,KAAMmD,KAAK1C,MAAO0C,KAAKzC,aAEnD,OADAyC,KAAKU,SAASlB,GACPzC,OAAOmF,OAAO1C,GAAO2C,KAAK,SAACC,GAAD,QAASA,2CAI1C,OACE3G,EAAAC,EAAAC,cAAC+F,GAAD,KACEjG,EAAAC,EAAAC,cAAC0G,EAAA3G,EAAD,CAAkB4G,KAAM,8CAKd,IAAAxB,EACiBd,KAAK1C,MAA7BZ,EADOoE,EACPpE,QAASsF,EADFlB,EACEkB,YAChB,GAAKtF,EAIL,OAAOjB,EAAAC,EAAAC,cAAC4G,GAAD,CAAS7F,QAASA,EAAS0D,KAAM4B,WAzChB5F,kCCJtB+B,GAAU9C,IAAOsG,IAAI,CACzBa,SAAU,IACVC,OAAQ,cAGJC,GAAOrH,YAAOsH,IAAPtH,CAAgB,CAC3BuH,QAAS,EACTC,aAAc,KAGVC,GAAczH,YAAO0H,IAAP1H,CAAuB,IAIrC2H,GAAW3H,YAAOC,IAAPD,CAAmB,CAClC6D,SAAU,GACVlD,MAAO,kBACP6G,aAAc,IAGVI,GAAc5H,YAAOC,IAAPD,CAAmB,CACrC6H,UAAW,KAGPC,GAAO9H,IAAO+H,GAAG,CACrBpH,MAAO,kBACPqH,WAAY,QAGRC,GAAQjI,YAAOC,IAAPD,CAAmB,CAC/BwH,aAAc,KAwHDU,eA/Gb,SAAAA,EAAY1D,GAAO,IAAAC,EAAA,OAAA/C,OAAAgD,EAAA,EAAAhD,CAAAiD,KAAAuD,IACjBzD,EAAA/C,OAAAkD,EAAA,EAAAlD,CAAAiD,KAAAjD,OAAAmD,EAAA,EAAAnD,CAAAwG,GAAApD,KAAAH,KAAMH,EAAO,MALfvC,MAAQ,CACNkG,UAAW,IAGM1D,8MAKjBE,KAAKU,SAAS,CAACqB,SAAS,aACO0B,QAAQC,IACrC,CAAC1D,KAAK2D,iBAAkB3D,KAAK4D,gDADxBJ,OAAWK,OAIlB7D,KAAKU,SAAS,CAACqB,SAAS,EAAOyB,YAAWK,0RAKjBC,MAAK,GAAA3G,OAAId,EAAJ,4BAAtB0H,kBACOA,EAASC,wGAGf,yRAMgBF,MAAK,GAAA3G,OAAId,EAAJ,sBAAtB0H,kBACOA,EAASC,wGAGf,8IAIJC,GAEL,OADcjE,KAAK1C,MAAZuG,IACIK,KAAK,SAAAC,GAAE,OAAIA,EAAGF,KAAOA,0CAIpBG,GAAM,IACXP,EAA+BO,EAA/BP,IAAKQ,EAA0BD,EAA1BC,KAAMC,EAAoBF,EAApBE,SAAUC,EAAUH,EAAVG,OACtBJ,EAAKnE,KAAKwE,OAAOX,GAChB7F,EAAemG,EAAfnG,KAAMyG,EAASN,EAATM,MACb,OAAIJ,EACF,SAAAlH,OAAgBkH,EAAKK,IAArB,SAAAvH,OAAgCkH,EAAKM,QAArC,aAAAxH,OAAwDa,EAAxD,KAGEsG,EACF,qBAAAnH,OAA4Ba,EAA5B,gCAAAb,OAA+DsH,EAAQH,EAAvE,WAGEC,EACF,qBAAApH,OAA4Ba,EAA5B,WAAAb,OAA0CoH,EAAOK,IAAjD,gDAAAzH,OAAmGsH,EAAQF,EAAOD,SAAlH,WAGK,uCAIGO,GAAO,IAAAhE,EAAAb,KACjB,OAAK6E,GAA0B,IAAjBA,EAAMC,OAKlBrJ,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAACqH,GAAD,gBACAvH,EAAAC,EAAAC,cAAA,UACGkJ,EAAME,IAAI,SAAAX,GAAI,OACb3I,EAAAC,EAAAC,cAACwH,GAAD,CAAMjG,IAAKkH,EAAKP,KACbhD,EAAKmE,cAAcZ,QATrB3I,EAAAC,EAAAC,cAACqH,GAAD,2DAiBIiC,GAAM,IAAAC,EAAAlF,KACZiE,EAAkDgB,EAAlDhB,GAAIjG,EAA8CiH,EAA9CjH,KAAMmH,EAAwCF,EAAxCE,MAAOC,EAAiCH,EAAjCG,UAAWP,EAAsBI,EAAtBJ,MAAOQ,EAAeJ,EAAfI,YAC1C,OACE5J,EAAAC,EAAAC,cAAC2J,GAAD,CAAMpI,IAAK+G,GACTxI,EAAAC,EAAAC,cAAC4J,GAAD,KACE9J,EAAAC,EAAAC,cAAC6J,EAAA9J,EAAD,CAAYK,QAAQ,KAAKsF,UAAU,KAAKoE,cAAY,GAAEzH,GACtDvC,EAAAC,EAAAC,cAAC2H,GAAD,CAAOtH,MAAM,UAAUD,QAAQ,IAAIsF,UAAU,KAA7C,UAAyDgE,GACzD5J,EAAAC,EAAAC,cAACqH,GAAD,KAAWmC,EAAMJ,IAAI,SAAAd,GAAE,OAAIiB,EAAKV,OAAOP,GAAIjG,OAAM0H,KAAK,OACrD1F,KAAK2F,YAAYd,GAClBpJ,EAAAC,EAAAC,cAACsH,GAAD,CAAa5B,UAAU,IAAIrF,MAAM,iBAAjC,eAA8D4J,KAAOR,GAAWS,OAAO,mDAO7E,IAAAC,EAAA9F,KACTwD,EAAaxD,KAAK1C,MAAlBkG,UACP,OACE/H,EAAAC,EAAAC,cAACoK,GAAD,KACGvC,EAAUuB,IAAI,SAAAE,GAAI,OAAIa,EAAKE,eAAef,uCAO/C,OADkBjF,KAAK1C,MAAhByE,QAEK/B,KAAKiG,eAAiBjG,KAAKkG,yBAhHpBpE,iNC/BjBkB,GAAW3H,YAAOC,IAAPD,CAAmB,CAClCW,MAAO,UACPkH,UAAW,KAGPiD,GAAU9K,YAAO+K,KAAP/K,CAAmB,CACjCoH,OAAQ,WAsEK4D,8MAhEb/I,MAAQ,CACN+C,MAAM,EACNiG,MAAO,0MAKmBtG,KAAKH,MAAxByG,UAAOC,aACdvG,KAAKU,SAAS,CACZ4F,QACAC,WACAlG,MAAM,gJAKRL,KAAKU,SAAS,CAACL,MAAM,0CAIrBL,KAAKU,SAAS,CAACL,MAAM,qCAGd,IACAmG,EAAUxG,KAAKH,MAAf2G,OACPA,GAAUA,IACVxG,KAAKoB,+CAGE,IAAAP,EAAAb,KAAAc,EACyBd,KAAK1C,MAA9BiJ,EADAzF,EACAyF,SAAUlG,EADVS,EACUT,KAAMiG,EADhBxF,EACgBwF,MACvB,IAAKC,EACH,OAAQ9K,EAAAC,EAAAC,cAAA,YAHH,IAMAqC,EAAeuI,EAAfvI,KAAMmH,EAASoB,EAATpB,MACb,OACE1J,EAAAC,EAAAC,cAAC8K,GAAA/K,EAAD,CACE2E,KAAMA,EACNc,QAAS,kBAAMN,EAAKO,gBAEpB3F,EAAAC,EAAAC,cAAC+K,GAAAhL,EAAD,WAAiBsC,EAAjB,oCACAvC,EAAAC,EAAAC,cAACgL,GAAAjL,EAAD,KACED,EAAAC,EAAAC,cAACiL,GAAD,CAAU7K,QAAQ,KAAKsF,UAAU,KAC/B5F,EAAAC,EAAAC,cAAA,mBADF,IACiBwJ,EAAMO,KAAK,OAE5BjK,EAAAC,EAAAC,cAACkL,GAAD,MACApL,EAAAC,EAAAC,cAAC6J,EAAA9J,EAAD,CAAYK,QAAQ,KAAKsF,UAAU,MACjC5F,EAAAC,EAAAC,cAAA,oBADF,KACmB2K,IAGrB7K,EAAAC,EAAAC,cAACmL,GAAApL,EAAD,KACED,EAAAC,EAAAC,cAACQ,EAAAT,EAAD,CAAQ+F,QAAS,kBAAMZ,EAAKO,eAAepF,MAAM,WAAjD,eAGAP,EAAAC,EAAAC,cAACQ,EAAAT,EAAD,CAAQ+F,QAAS,kBAAMZ,EAAK2F,UAAUxK,MAAM,UAAU+K,WAAS,GAA/D,qBAzDsB3K,4KCL1B4K,GAAgB3L,IAAOsG,IAAI,CAC/BhD,QAAS,OACTsI,oBAAqB,UACrBC,QAAS,KAGLC,GAAa9L,IAAOsG,IAAI,CAC5BhD,QAAS,OACTC,WAAY,SACZgD,eAAgB,WAGZwF,GAAe/L,YAAOgM,KAAPhM,CAAmB,CACtCiM,MAAO,GACPC,OAAQ,GACRC,WAAY,KAGRrB,GAAU9K,YAAO+K,KAAP/K,CAAmB,CACjCoH,OAAQ,YAGGgF,GACE,EADFA,GAED,EAFCA,GAGC,EAERC,GAAQ,CAAC,CACbC,MAAOF,GACPG,KAAM,eACL,CACDD,MAAOF,GACPG,KAAM,YACL,CACDD,MAAOF,GACPG,KAAM,eAmOOC,eAnNb,SAAAA,EAAYhI,GAAO,IAAAC,EAAA,OAAA/C,OAAAgD,EAAA,EAAAhD,CAAAiD,KAAA6H,IACjB/H,EAAA/C,OAAAkD,EAAA,EAAAlD,CAAAiD,KAAAjD,OAAAmD,EAAA,EAAAnD,CAAA8K,GAAA1H,KAAAH,KAAMH,EAAOtC,MAZfD,MAAQ,CACNuG,IAAK,GACLO,KAAMtE,EAAKgI,iBACX3D,GAAI,IAQarE,EALnBjD,KAAO,CACLmB,KAAM,IAIW8B,EAFnBiI,UAAY,GAIVjI,EAAKiI,UAAYnL,EAAgBkD,EAAKjD,MAEtCiD,EAAKxC,MAALP,OAAAiL,EAAA,EAAAjL,CAAA,GACK+C,EAAKjD,KADVE,OAAA2H,GAAA,EAAA3H,QAAAmD,EAAA,EAAAnD,CAAA8K,EAAAI,WAAA,QAAAlL,OAAAmL,GAAA,EAAAnL,CAAA+C,IAGKA,EAAKxC,OAPOwC,yFAWOQ,GAAW,IAC5BqH,EAASrH,EAATqH,MAEP,GAAIA,IADiB3H,KAAKH,MAAnB8H,MACY,KACVvD,EAAYuD,EAAZvD,KAAMD,EAAMwD,EAANxD,GACbnE,KAAKU,SAAS,CAAC0D,OAAMD,0LAKLnE,KAAK4D,kBAAjBC,SAGN8D,GAFKA,EAAS3H,KAAKH,MAAd8H,QAEY,CACfvD,KAAMpE,KAAK8H,iBACX3D,GAAIN,EAAI,GAAGI,IAENG,KAAYuD,GAAZvD,KAAMD,OACbnE,KAAKU,SAAS,CAACmD,MAAKO,OAAMD,kJAI1B,MAAO,CACLgE,KAAMT,GAAM,GAAGC,MACfS,OAAQ,GACRC,OAAQ,8KAMevE,MAAK,GAAA3G,OAAId,EAAJ,sBAAtB0H,kBACOA,EAASC,wGAGf,yJAIO,IAAAnD,EAAAb,KACToE,EAAQpE,KAAK1C,MAAb8G,KACA+D,EAAQ/D,EAAR+D,KAEP,OACE1M,EAAAC,EAAAC,cAAC2M,GAAA5M,EAAD,CAAa6M,WAAS,EAACxM,QAAQ,WAAW0G,OAAO,UAC/ChH,EAAAC,EAAAC,cAAC6M,GAAA9M,EAAD,cACAD,EAAAC,EAAAC,cAAC8M,GAAA/M,EAAD,CACEiM,MAAOQ,EACPO,SAAU,SAAArK,GAAc,IAAZsK,EAAYtK,EAAZsK,OACVvE,EAAK+D,KAAOQ,EAAOhB,MACnB9G,EAAK+H,YAAYxE,IAEnByE,MAAOpN,EAAAC,EAAAC,cAACmN,GAAApN,EAAD,CAAeqN,WAAY,MACjCrB,GAAM3C,IAAI,SAAAiE,GAAC,OAAKvN,EAAAC,EAAAC,cAACsN,GAAAvN,EAAD,CAAUwB,IAAK8L,EAAErB,MAAOA,MAAOqB,EAAErB,OAAQqB,EAAEpB,wDAM9C,IAEbO,EADQnI,KAAK1C,MAAb8G,KACA+D,KAEP,OAAQA,GACN,KAAKV,GACH,OAAOzH,KAAKkJ,iBAAiB,CAAC,QAAS,UAEzC,KAAKzB,GACH,OAAOzH,KAAKmJ,uBAEd,KAAK1B,GACH,OAAOzH,KAAKkJ,iBAAiB,CAAC,YAAa,aAE7C,QACE,MAAM,IAAItL,MAAJ,GAAAT,OAAagL,EAAb,gEAKKiB,GAAQ,IAAAlE,EAAAlF,KAChBoE,EAAQpE,KAAK1C,MAAb8G,KACAgE,EAAkBhE,EAAlBgE,OAAQC,EAAUjE,EAAViE,OACf,OACE5M,EAAAC,EAAAC,cAACqL,GAAD,KACEvL,EAAAC,EAAAC,cAAC0N,GAAA3N,EAAD,CACEiM,MAAOS,EACPM,SAAU,SAAA3J,GAAc,IAAZ4J,EAAY5J,EAAZ4J,OACVvE,EAAKgE,OAASO,EAAOhB,MACrBzC,EAAK0D,YAAYxE,IAEnB3B,OAAO,SACP6G,MAAOF,EAAO,GACdrN,QAAQ,aAEVN,EAAAC,EAAAC,cAAC0N,GAAA3N,EAAD,CACEiM,MAAOU,EACPK,SAAU,SAAAtJ,GAAc,IAAZuJ,EAAYvJ,EAAZuJ,OACVvE,EAAKiE,OAASM,EAAOhB,MACrBzC,EAAK0D,YAAYxE,IAEnB3B,OAAO,SACP6G,MAAOF,EAAO,GACdrN,QAAQ,6DAMO,IAAA+J,EAAA9F,KACdoE,EAAQpE,KAAK1C,MAAb8G,KACAgE,EAAuBhE,EAAvBgE,OAAQmB,EAAenF,EAAfmF,YACf,OACE9N,EAAAC,EAAAC,cAAC0N,GAAA3N,EAAD,CACE8D,QAAS+J,EACTC,WAAYD,EACZ5B,MAAOS,EACPM,SAAU,SAAAe,GAAc,IAAZd,EAAYc,EAAZd,OACVvE,EAAKgE,OAASO,EAAOhB,MACrB7B,EAAK8C,YAAYxE,IAEnB3B,OAAO,SACP6G,MAAM,WACNvN,QAAQ,iDAIF,IAAA2N,EAAA1J,KAAAc,EACQd,KAAK1C,MAAhB6G,EADGrD,EACHqD,GAAIN,EADD/C,EACC+C,IACX,OACEpI,EAAAC,EAAAC,cAACwL,GAAD,KACE1L,EAAAC,EAAAC,cAAC2M,GAAA5M,EAAD,CAAa6M,WAAS,EAACxM,QAAQ,WAAW0G,OAAO,UAC/ChH,EAAAC,EAAAC,cAAC6M,GAAA9M,EAAD,YACAD,EAAAC,EAAAC,cAAC8M,GAAA/M,EAAD,CACEiM,MAAOxD,EACPuE,SAAU,SAAC/H,GAAD,OAAW+I,EAAKC,UAAUhJ,EAAMgI,OAAOhB,QACjDkB,MAAOpN,EAAAC,EAAAC,cAACmN,GAAApN,EAAD,CAAeqN,WAAY,MACjClF,EAAIkB,IAAI,SAAAZ,GAAE,OAAK1I,EAAAC,EAAAC,cAACsN,GAAAvN,EAAD,CAAUwB,IAAKiH,EAAGF,GAAI0D,MAAOxD,EAAGF,IAAKE,EAAGnG,UAG5DvC,EAAAC,EAAAC,cAACyL,GAAD,CAAc3F,QAAS,kBAAMiI,EAAKE,eAChCnO,EAAAC,EAAAC,cAACkO,GAAAnO,EAAD,kDAMU,IAAAoO,EACE9J,KAAK1C,MAAhB6G,EADS2F,EACT3F,GACD4F,EAFUD,EACLjG,IACOK,KAAK,SAAA9B,GAAC,OAAIA,EAAE6B,KAAOE,IACrC,GAAK4F,EAAL,CAHgB,IAOTtF,EAAyCsF,EAAzCtF,MAAOuF,EAAkCD,EAAlCC,UAAWC,EAAuBF,EAAvBE,UAAWC,EAAYH,EAAZG,SACpC,OACEzO,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAAA,sBAAc8I,GACdhJ,EAAAC,EAAAC,cAAA,yCAAiCqO,GAChCC,GAAaxO,EAAAC,EAAAC,cAAA,yCACbuO,GAAYzO,EAAAC,EAAAC,cAAA,kEAKVwO,GAAG,IACHzB,EAAY1I,KAAKH,MAAjB6I,SACPA,GAAYA,EAASyB,qCAGbhG,GAAI,IACLC,EAAQpE,KAAK1C,MAAb8G,KACPpE,KAAKU,SAAS,CAACyD,OACfnE,KAAK0I,SAAS,CAACvE,KAAIC,6CAITA,GAAM,IACTD,EAAMnE,KAAK1C,MAAX6G,GACPnE,KAAKU,SAAS,CAAC0D,SACfpE,KAAK0I,SAAS,CAACvE,KAAIC,8CAGR,IACJgG,EAAUpK,KAAKH,MAAfuK,OACPA,GAAUA,qCAIV,OACE3O,EAAAC,EAAAC,cAAA,WACGqE,KAAKqK,YACLrK,KAAKsK,kBACLtK,KAAKuK,kBACLvK,KAAKwK,sBACN/O,EAAAC,EAAAC,cAAC8O,GAAD,cA1NY3I,IAmOdvE,GAAc,CAClBS,KAAM,CACJxB,SAAU,CAACkO,YAAY,KCrRrBC,GAAatP,YAAOuP,IAAPvP,CAAe,CAChC6H,UAAW,GACXL,aAAc,GACd5D,YAAa,KAsHA4L,8MAjHbvN,MAAQ,CACNuH,MAAO,6FAGiBvE,GAAW,IAC5BuE,EAASvE,EAATuE,MAEHA,IADiB7E,KAAKH,MAAnBgF,OAEL7E,KAAKU,SAAS,CAACmE,sDAIC,IACXA,EAAS7E,KAAKH,MAAdgF,MACPiG,QAAQC,IAAIlG,GACZ7E,KAAKU,SAAS,CAACmE,4CAGP,IACDA,EAAS7E,KAAK1C,MAAduH,MACPA,EAAMmG,UAAKC,GACXjL,KAAKU,SAAS,CAACmE,6CAGNqG,GAAO,IACTrG,EAAS7E,KAAK1C,MAAduH,MACPA,EAAMsG,OAAOD,EAAO,GACpBlL,KAAKU,SAAS,CAACmE,8CAGLT,EAAM8G,GAAO,IAChBrG,EAAS7E,KAAK1C,MAAduH,MACPiG,QAAQC,IAAI,SAAU3G,GACtBS,EAAMqG,GAAS9G,EACfpE,KAAKU,SAAS,CAACmE,yCAGV,IACEuG,EAAQpL,KAAKH,MAAbuL,KACPA,GAAQA,gDAGU,IAAAvK,EAAAb,KAGlB,OAFgBA,KAAK1C,MAAduH,MAEME,IAAI,SAAAiE,GAAK,IACb7E,EAAY6E,EAAZ7E,GAAIC,EAAQ4E,EAAR5E,KACX,OAAOrH,OAAAiL,EAAA,EAAAjL,CAAA,CACL8G,IAAKM,GACFtD,EAAKwK,YAAYjH,0CAKdA,GAAM,IACT+D,EAAwB/D,EAAxB+D,KAAMC,EAAkBhE,EAAlBgE,OAAQC,EAAUjE,EAAViE,OACrB,OAAQF,GACN,KAAKV,GACH,MAAO,CACLpD,KAAM,CACJK,IAAK0D,EACLzD,QAAS0D,IAIf,KAAKZ,GACH,MAAO,CAACnD,SAAU8D,GAEpB,KAAKX,GACH,MAAO,CACLlD,OAAQ,CACNK,IAAKwD,EACL9D,SAAU+D,IAIhB,QACE,MAAO,sCAIH8B,GACRA,EAAEmB,iBADS,IAGJC,EAAYvL,KAAKH,MAAjB0L,SACA1G,EAAS7E,KAAK1C,MAAduH,MAEP0G,GAAYA,EAAS,CACnB1G,QACA2G,QAASxL,KAAKyL,uDAIT,IAAAvG,EAAAlF,KACA6E,EAAS7E,KAAK1C,MAAduH,MACP,OACEpJ,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAACgP,GAAD,CAAY3O,MAAM,UAAUyF,QAAS,kBAAMyD,EAAKwG,YAAhD,eACAjQ,EAAAC,EAAAC,cAAA,QAAM4P,SAAU,SAAApB,GAAC,OAAIjF,EAAKyG,UAAUxB,KACjCtF,EAAME,IAAI,SAACX,EAAM8G,GAAP,OAAiBzP,EAAAC,EAAAC,cAACiQ,GAAD,CAAO1O,IAAKgO,EACtCvD,MAAOvD,EACPgG,OAAQ,kBAAMlF,EAAK0E,WAAWsB,IAC9BxC,SAAU,SAACyB,GAAD,OAAOjF,EAAK0D,YAAYuB,EAAGe,QACvCzP,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAACgP,GAAD,CAAYlJ,QAAS,kBAAMyD,EAAKkG,SAAhC,QACA3P,EAAAC,EAAAC,cAACgP,GAAD,CAAY5O,QAAQ,YAAYC,MAAM,UAAUoE,KAAK,UAArD,kBA3GYhE,uDCDlByP,GAAexQ,IAAOsG,IAAI,CAC9B9F,SAAU,aAINiQ,GAAYzQ,YAAOgM,KAAPhM,CAAmB,CACnCQ,SAAU,WACVkQ,IAAK,EACLC,MAAO,EACPzE,OAZqB,GAarBD,MAbqB,KAgBjB2E,GAAc5Q,YAAOgM,KAAPhM,CAAmB,CACrCQ,SAAU,WACVkQ,IAAK,EACLC,MAAO,GACPzE,OApBqB,GAqBrBD,MArBqB,KAiGR4E,8MArEb5O,MAAQ,CACNqK,MAAO,sFAGW,IACXA,EAAS3H,KAAKH,MAAd8H,MACHA,GACF3H,KAAKU,SAAS,CAACiH,4DAIOrH,GAAW,IAC5BqH,EAASrH,EAATqH,MAGHA,IAFiB3H,KAAKH,MAAnB8H,OAGL3H,KAAKU,SAAS,CAACiH,2CAKVA,GAAO,IACPe,EAAY1I,KAAKH,MAAjB6I,SACPA,GAAYA,EAASf,kCAGhB,IACAA,EAAS3H,KAAK1C,MAAdqK,MACLA,GAAS,EACT3H,KAAKU,SAAS,CAACiH,UACf3H,KAAK0I,SAASf,mCAGR,IACDA,EAAS3H,KAAK1C,MAAdqK,MACLA,EAAQwE,KAAKC,IAAIzE,EAAQ,EAAG,GAC5B3H,KAAKU,SAAS,CAACiH,UACf3H,KAAK0I,SAASf,oCAIP,IAAA9G,EAAAb,KAAAO,EAC4BP,KAAKH,MAAjC2J,EADAjJ,EACAiJ,WAAYhK,EADZe,EACYf,MAAO8J,EADnB/I,EACmB+I,MACnB3B,EAAS3H,KAAK1C,MAAdqK,MACP,OACElM,EAAAC,EAAAC,cAACkQ,GAAD,KACEpQ,EAAAC,EAAAC,cAAC0N,GAAA3N,EAAD,CACE6M,WAAS,EACT/I,MAAOA,EACPgK,WAAYA,EACZ7B,MAAOA,EACPe,SAAU,SAAC/H,GAAD,OAAWE,EAAK6H,SAAS/H,EAAMgI,OAAOhB,QAChD2B,MAAOA,EACP+C,WAAY,CACVC,UAAU,GAEZvQ,QAAQ,aAEVN,EAAAC,EAAAC,cAACmQ,GAAD,CAAWxJ,KAAK,QAAQb,QAAS,kBAAMZ,EAAK0L,SAC1C9Q,EAAAC,EAAAC,cAAC6Q,GAAA9Q,EAAD,OAEFD,EAAAC,EAAAC,cAACsQ,GAAD,CAAa3J,KAAK,QAAQb,QAAS,kBAAMZ,EAAK4L,UAC5ChR,EAAAC,EAAAC,cAAC+Q,GAAAhR,EAAD,eAhEiBU,aC3BrBuO,GAAatP,YAAOuP,IAAPvP,CAAe,CAChC6H,UAAW,GACXL,aAAc,GACd5D,YAAa,KAGT0N,GAAYtR,IAAOsG,IAAI,CAC3BhD,QAAS,OACTsI,oBAAqB,UACrBC,QAAS,GACTrE,aAAc,GACd+J,aAAc,SACdhO,WAAY,WA+ECiO,8MA1EbvP,MAAQ,CACNuG,IAAK,6FAGmBvD,GAAW,IAC5BuD,EAAOvD,EAAPuD,IAEHA,IADc7D,KAAKH,MAAhBgE,KAEL7D,KAAKU,SAAS,CAACmD,uKAKZA,EAAO7D,KAAKH,MAAZgE,KACKiB,4BAASjB,wCAAY7D,KAAK4D,qCAApCC,OACA7D,KAAKU,SAAS,CAACmD,uRAKUC,MAAK,GAAA3G,OAAId,EAAJ,sBAAtB0H,kBACYA,EAASC,qBAArBH,2BAECA,EAAIkB,IAAI,SAAA3C,GAEb,OADAA,EAAEwC,IAAM,EACDxC,kLAQN,IACEgJ,EAAQpL,KAAKH,MAAbuL,KACPA,GAAQA,0CAGIxG,EAAKsG,GAAO,IACjBrH,EAAO7D,KAAK1C,MAAZuG,IACPA,EAAIqH,GAAOtG,IAAMA,EACjB5E,KAAKU,SAAS,CAACmD,iFAIFsG,iFACgBnK,KAAKH,MAA3B0L,aAAU7C,aACV7E,EAAO7D,KAAK1C,MAAZuG,IACP6E,GAAYA,EAAS,CACnB7E,MACA2H,QAAS3H,EAAIiJ,OAAO,SAACC,EAAM5I,GAAP,OAAc4I,EAAK5P,OAAO,IAAIO,MAAMyG,EAAGS,KAAKoI,KAAK7I,EAAGF,MAAM,MAEhFsH,GAAYA,EAASpB,uIAGd,IAAAtJ,EAAAb,KACA6D,EAAO7D,KAAK1C,MAAZuG,IACP,OACEpI,EAAAC,EAAAC,cAAA,QAAM4P,SAAU,SAAApB,GAAC,OAAItJ,EAAKoM,SAAS9C,KAChCtG,EAAIkB,IAAI,SAACZ,EAAI+G,GAAL,OACPzP,EAAAC,EAAAC,cAACgR,GAAD,CAAWzP,IAAKiH,EAAGF,IACjBxI,EAAAC,EAAAC,cAAC6J,EAAA9J,EAAD,KAAayI,EAAGnG,MAChBvC,EAAAC,EAAAC,cAACuR,GAAD,CAAc5D,MAAM,MAAM3B,MAAOxD,EAAGS,IAAK8D,SAAU,SAACf,GAAD,OAAW9G,EAAKsM,cAAcxF,EAAOuD,SAG5FzP,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAACyR,GAAD,CAAY3L,QAAS,kBAAMZ,EAAKuK,SAAhC,QACA3P,EAAAC,EAAAC,cAACyR,GAAD,CAAYrR,QAAQ,YAAYC,MAAM,UAAUoE,KAAK,UAArD,sBArEiBhE,aCfrBuO,GAAatP,YAAOuP,IAAPvP,CAAe,CAChC6H,UAAW,GACXL,aAAc,GACd5D,YAAa,KA2EAoO,eA5Db,SAAAA,EAAYxN,GAAO,IAAAC,EAAA,OAAA/C,OAAAgD,EAAA,EAAAhD,CAAAiD,KAAAqN,IACjBvN,EAAA/C,OAAAkD,EAAA,EAAAlD,CAAAiD,KAAAjD,OAAAmD,EAAA,EAAAnD,CAAAsQ,GAAAlN,KAAAH,KAAMH,EAAOtC,MAXfD,MAAQ,CACNU,KAAM,GACNsP,UAAW,IAQMxN,EALnBjD,KAAO,CACLmB,KAAM,IAIW8B,EAFnBiI,UAAY,GAIVjI,EAAKiI,UAAYnL,EAAgBkD,EAAKjD,MAEtCiD,EAAKxC,MAALP,OAAAiL,EAAA,EAAAjL,CAAA,GACK+C,EAAKjD,KADVE,OAAA2H,GAAA,EAAA3H,QAAAmD,EAAA,EAAAnD,CAAAsQ,EAAApF,WAAA,QAAAlL,OAAAmL,GAAA,EAAAnL,CAAA+C,IAGKA,EAAKxC,OAPOwC,yFAWOQ,GAAW,IAC5BtC,EAAQsC,EAARtC,KAEHA,IADegC,KAAKH,MAAjB7B,MAELgC,KAAKU,SAAS,CAAC1C,mKAKZA,EAAQgC,KAAKH,MAAb7B,KACLgC,KAAKU,SAAS,CAAC1C,0IAGV,IACEoN,EAAQpL,KAAKH,MAAbuL,KACPA,GAAQA,wCAGEjB,GAEV,GADAA,EAAEmB,kBACEtL,KAAKuN,eAAT,CAFa,IAMNhC,EAAYvL,KAAKH,MAAjB0L,SACAvN,EAAQgC,KAAK1C,MAAbU,KACPuN,GAAYA,EAAS,CAACvN,2CAGf,IAAA6C,EAAAb,KAAAc,EACmBd,KAAK1C,MAAxBU,EADA8C,EACA9C,KAAMsP,EADNxM,EACMwM,UACb,OACE7R,EAAAC,EAAAC,cAAA,QAAM4P,SAAU,SAACpB,GAAD,OAAOtJ,EAAK2M,YAAYrD,KACtC1O,EAAAC,EAAAC,cAAC0N,GAAA3N,EAAD,CACE6M,WAAS,EACT/I,QAAS8N,EACT9D,WAAY8D,EACZ3F,MAAO3J,EACP0K,SAAU,SAAArK,GAAA,IAAEsK,EAAFtK,EAAEsK,OAAF,OAAc9H,EAAKH,SAAS,CAAC1C,KAAM2K,EAAOhB,SACpDlF,OAAO,SACP6G,MAAM,gBACNvN,QAAQ,aAEVN,EAAAC,EAAAC,cAAC8R,GAAD,CAAY1R,QAAQ,YAAYC,MAAM,UAAUoE,KAAK,UAArD,iBAlEmB0B,IA0ErBvE,GAAc,CAClBS,KAAM,CACJxB,SAAU,CAACkO,YAAY,KCvErBvM,GAAU9C,YAAOqS,KAAPrS,CAAiB,CAC/BmH,SAAU,IACVC,OAAQ,YACRG,QAAS,KA8LI+K,eAhLb,SAAAA,EAAY9N,GAAO,IAAAC,EAAA,OAAA/C,OAAAgD,EAAA,EAAAhD,CAAAiD,KAAA2N,IACjB7N,EAAA/C,OAAAkD,EAAA,EAAAlD,CAAAiD,KAAAjD,OAAAmD,EAAA,EAAAnD,CAAA4Q,GAAAxN,KAAAH,KAAMH,EAAO,MAVfvC,MAAQ,CACNsQ,KAAM,EACN/I,MAAO,GACPhB,IAAK,GACL0C,SAAU,GACVxE,SAAS,EACT8L,cAAc,GAGG/N,sEAIZ,IACE8N,EAAQ5N,KAAK1C,MAAbsQ,KACP5N,KAAKU,SAAS,CAACkN,KAAMA,EAAO,uCAGnBjN,GAAO,IACTkE,EAAkBlE,EAAlBkE,MAAO2G,EAAW7K,EAAX6K,QACPjF,EAAYvG,KAAK1C,MAAjBiJ,SACPA,EAAS1B,MAAQ2G,EACjBxL,KAAKU,SAAS,CAACmE,QAAO0B,WAAUqH,KAAM,uCAG7BjN,GAAO,IACTkD,EAAgBlD,EAAhBkD,IAAK2H,EAAW7K,EAAX6K,QACLjF,EAAYvG,KAAK1C,MAAjBiJ,SACPA,EAASpB,MAAQqG,EACjBxL,KAAKU,SAAS,CAACmD,MAAK0C,iDAGV5F,GAAO,IACV3C,EAAQ2C,EAAR3C,KACAuI,EAAYvG,KAAK1C,MAAjBiJ,SACPA,EAASvI,KAAOA,EAChBgC,KAAKU,SAAS,CAAC1C,OAAMuI,WAAUqH,KAAM,6EAGxBzD,gFACbA,EAAEmB,iBAEFtL,KAAKU,SAAS,CACZqB,SAAS,aAGS/B,KAAK8N,oBAAnBxH,SAENtG,KAAKU,SAAS,CACZqB,SAAS,EACT8L,cAAc,EACdvH,+QAOMtG,KAAK+N,sBAEX/N,KAAKU,SAAS,CACZhE,QAAS,oBAGOsD,KAAKH,MAAhBmO,QACChD,KAAK,qDAGbhL,KAAKU,SAAS,CACZhE,QAAS,8BACT0D,KAAM,oSAOiBJ,KAAK1C,MAAvBU,SAAMuI,sBACUzC,MAAK,GAAA3G,OAAId,EAAJ,kBAA6B,CACvD4R,OAAQ,OACRC,QAAS,CACPC,OAAU,mBACVC,eAAgB,oBAElBC,KAAMC,KAAKC,UAALxR,OAAAiL,EAAA,EAAAjL,CAAA,CAAgBiB,QAASuI,oBAN3BxC,kBAQgBA,EAASC,8BAAxBsC,4BACAA,4TAQkBtG,KAAK1C,MAAvBU,SAAMuI,sBACPzC,MAAK,GAAA3G,OAAId,EAAJ,YAAuB,CAChC4R,OAAQ,OACRC,QAAS,CACPC,OAAU,mBACVC,eAAgB,oBAElBC,KAAMC,KAAKC,UAALxR,OAAAiL,EAAA,EAAAjL,CAAA,CAAgBiB,QAASuI,8MAOrB,IACPqH,EAAQ5N,KAAK1C,MAAbsQ,KAEP,OACEnS,EAAAC,EAAAC,cAAC6S,GAAA9S,EAAD,CAAS+S,WAAYb,EAAMc,YAAY,YACpC1O,KAAK2O,qBACL3O,KAAK4O,kBACL5O,KAAK6O,mEAKS,IAAAhO,EAAAb,KACZhC,EAAQgC,KAAK1C,MAAbU,KACP,OACEvC,EAAAC,EAAAC,cAACmT,GAAApT,EAAD,KACED,EAAAC,EAAAC,cAACoT,GAAArT,EAAD,8BACAD,EAAAC,EAAAC,cAACqT,GAAAtT,EAAD,KACED,EAAAC,EAAAC,cAACsT,GAAD,CACEjR,KAAMA,EACNoN,KAAM,kBAAMvK,EAAKuK,QACjBG,SAAU,SAACpB,GAAD,OAAOtJ,EAAK2M,YAAYrD,kDAM1B,IAAAjF,EAAAlF,KACT6E,EAAS7E,KAAK1C,MAAduH,MACP,OACEpJ,EAAAC,EAAAC,cAACmT,GAAApT,EAAD,KACED,EAAAC,EAAAC,cAACoT,GAAArT,EAAD,0BACAD,EAAAC,EAAAC,cAACqT,GAAAtT,EAAD,KACED,EAAAC,EAAAC,cAACuT,GAAD,CACErK,MAAOA,EACPuG,KAAM,kBAAMlG,EAAKkG,QACjBG,SAAU,SAACpB,GAAD,OAAOjF,EAAKiK,WAAWhF,qDAMtB,IAAArE,EAAA9F,KACZ6D,EAAO7D,KAAK1C,MAAZuG,IACP,OACEpI,EAAAC,EAAAC,cAACmT,GAAApT,EAAD,KACED,EAAAC,EAAAC,cAACoT,GAAArT,EAAD,2BACAD,EAAAC,EAAAC,cAACqT,GAAAtT,EAAD,KACED,EAAAC,EAAAC,cAACyT,GAAD,CACEvL,IAAKA,EACLuH,KAAM,kBAAMtF,EAAKsF,QACjBG,SAAU,SAACpB,GAAD,OAAOrE,EAAKmH,SAAS9C,IAC/BzB,SAAU,SAACyB,GAAD,OAAOrE,EAAKuJ,WAAWlF,6CAM9B,IAAAT,EAAA1J,KAAAsP,EAC6BtP,KAAK1C,MAAtCuQ,EADIyB,EACJzB,aAAcvH,EADVgJ,EACUhJ,MAAOC,EADjB+I,EACiB/I,SAC5B,OACE9K,EAAAC,EAAAC,cAAC4T,GAAD,CAASC,UAAW,GAClB/T,EAAAC,EAAAC,cAAC6J,EAAA9J,EAAD,CAAYK,QAAQ,KAAKsF,UAAU,MAAnC,gBACCrB,KAAKyP,gBACL5B,GAAgBpS,EAAAC,EAAAC,cAAC+T,GAAD,CAAmBrP,KAAMwN,EAAcvH,MAAOA,EAAOC,SAAUA,EAAUC,OAAQ,kBAAMkD,EAAKlD,YAC5GxG,KAAK2P,kDAOV,OADkB3P,KAAK1C,MAAhByE,QACU/B,KAAKiG,eAAiBjG,KAAK4P,oBAvLlB9N,ICdxB+N,GAAoBC,oCACpBC,GAAMC,iBAAOjT,OAAAiL,EAAA,EAAAjL,CAAA,GACdkT,sBADa,CAEhBC,eAAgBC,SAASC,eAAe,0BAGpCC,GAAOhV,IAAOsG,IAAI,IAsBT2O,oLAfX,OACE7U,EAAAC,EAAAC,cAAC4U,EAAA7U,EAAD,CAAaqU,IAAKA,GAAKF,kBAAmBA,IACxCpU,EAAAC,EAAAC,cAAC6U,EAAA,EAAD,KACE/U,EAAAC,EAAAC,cAAC0U,GAAD,KACE5U,EAAAC,EAAAC,cAAC8U,EAAD,MAEAhV,EAAAC,EAAAC,cAAC+U,EAAA,EAAD,CAAOC,OAAK,EAACC,KAAK,IAAIvP,UAAWwP,KACjCpV,EAAAC,EAAAC,cAAC+U,EAAA,EAAD,CAAOE,KAAK,OAAOvP,UAAWsM,eATxBvR,aCTE0U,QACW,cAA7BC,OAAOC,SAASC,UAEe,UAA7BF,OAAOC,SAASC,UAEhBF,OAAOC,SAASC,SAASC,MACvB,2DCZNC,IAASC,OAAO3V,EAAAC,EAAAC,cAAC0V,GAAD,MAASlB,SAASC,eAAe,SD2H3C,kBAAmBkB,WACrBA,UAAUC,cAAcC,MAAMC,KAAK,SAAAC,GACjCA,EAAaC","file":"static/js/main.38ed1d1d.chunk.js","sourcesContent":["import React, {Component} from 'react';\nimport styled from 'styled-components';\nimport {Link} from 'react-router-dom';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\n\nconst MainTitle = styled(Typography)({\n  flexGrow: 1,\n});\n\nclass NavBar extends Component {\n  render() {\n    return (\n      <AppBar position=\"static\">\n        <Toolbar>\n          <MainTitle variant=\"h6\" color=\"inherit\" >\n            <Link to=\"/\">Job Ads</Link>\n          </MainTitle>\n          <Link to=\"/add\">\n            <Button color=\"inherit\">Add Customer</Button>\n          </Link>\n        </Toolbar>\n      </AppBar>\n    );\n  }\n}\n\nexport default NavBar;\n","export const API_URL = 'http://localhost:3001/api/'","import validatejs from 'validate.js';\n\nvalidatejs.validators.presence.options = {message: 'This field is required.'};\nvalidatejs.validators.email.options = {message: 'Enter a valid email.'};\n\nconst createFormError = (form) => {\n  const obj = {};\n  Object.keys(form).forEach((key) => {\n    obj[`${key}Error`] = '';\n  });\n  return obj;\n};\n\nconst getFormFieldNames = (names) => {\n  if (Array.isArray(names)) {\n    return names;\n  }\n\n  if (typeof names === 'string') {\n    return [names];\n  }\n\n  if (typeof names === 'object') {\n    return Object.keys(names);\n  }\n\n  throw new Error('getFormFieldNames()', names);\n};\n\nconst validate = (objNames, state, constraints) => {\n  const errorObj = {};\n  const names = getFormFieldNames(objNames) || [];\n\n  const field = {};\n  const constraint = {};\n  names.forEach((name) => {\n    field[name] = state[name];\n    constraint[name] = constraints[name];\n  });\n\n  const result = validatejs.validate(field, constraint, {fullMessages: false}) || {};\n  names.forEach((name) => {\n    errorObj[`${name}Error`] = result[name] ? result[name][0] : '';\n  });\n  return errorObj;\n};\n\nconst isEmptyOrUndefined = (value) => {\n  return value === null || value === undefined || value === '';\n};\n\nconst cleanObject = (obj) => {\n  const clean = obj;\n  const propNames = Object.getOwnPropertyNames(obj);\n  propNames.forEach((propName) => {\n    if (isEmptyOrUndefined(clean[propName])) {\n      delete clean[propName];\n    }\n  });\n  return clean;\n};\n\nexport {createFormError, validate, cleanObject};\n","import React, {Component} from 'react';\nimport styled from 'styled-components';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport SnackbarContent from '@material-ui/core/SnackbarContent';\nimport green from '@material-ui/core/colors/green';\nimport MuiIcon from '@material-ui/core/Icon';\nimport IconButton from '@material-ui/core/IconButton';\nimport Typography from '@material-ui/core/Typography';\n\nconst Content = styled(SnackbarContent)(({bg}) => ({\n  backgroundColor: bg,\n\n  'div:first-child': {\n    flex: 1,\n  },\n}));\n\nconst ContentMessage = styled(Typography)({\n  display: 'flex',\n  alignItems: 'center',\n  flex: 1,\n});\n\nconst Icon = styled(MuiIcon)(({clr, name}) => ({\n  color: clr,\n  marginRight: name === 'close' ? 0 : 15,\n  fontSize: 20,\n}));\n\nconst MessageIcon = ({name, clr}) => (\n  <Icon clr={clr} name={name}>\n    {name}\n  </Icon>\n);\n\nconst variantIcon = {\n  success: 'check_circle',\n  error: 'error',\n};\n\nconst variantColor = {\n  success: green[600],\n  error: '#f44336',\n};\n\nconst variantAutoHide = {\n  success: 3000,\n  error: 50000,\n};\n\nclass Message extends Component {\n  constructor(props) {\n    super(props);\n    const {message, type} = props;\n    this.state = {\n      open: !!message,\n      message,\n      type,\n    };\n  }\n\n  componentWillReceiveProps(nextProps) {\n    const {message, type} = nextProps;\n    const {message: msg, type: typ} = this.props;\n    if (msg !== message) {\n      this.setState({message, open: !!message});\n    }\n\n    if (typ !== type) {\n      this.setState({type});\n    }\n  }\n\n  handleClose(event, reason) {\n    if (reason === 'clickaway') {\n      return;\n    }\n\n    this.setState({open: false});\n  }\n\n  render() {\n    const {message, type, open} = this.state;\n    const variant = type || 'success';\n    const iconName = variantIcon[variant];\n    const color = variantColor[variant];\n    const duration = variantAutoHide[variant];\n\n    return (\n      <Snackbar open={open} autoHideDuration={duration} onClose={() => this.handleClose()}>\n        <Content\n          bg={color}\n          message={\n            <ContentMessage color=\"inherit\" component=\"span\">\n              <MessageIcon name={iconName} />\n              {message}\n            </ContentMessage>\n          }\n          action={[\n            <IconButton key=\"close\" color=\"inherit\" onClick={() => this.handleClose()}>\n              <MessageIcon name=\"close\" />\n            </IconButton>,\n          ]}\n        />\n      </Snackbar>\n    );\n  }\n}\n\nexport default Message;\n","import React, {Component} from 'react';\nimport styled from 'styled-components';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport {validate} from '../helpers/Form';\nimport Message from './Message';\n\nconst LoaderContent = styled.div({\n  display: 'flex',\n  alignItems: 'center',\n  justifyContent: 'center',\n  minHeight: 350,\n});\n\nclass BaseComponent extends Component {\n  state = {\n    loading: false,\n    message: '',\n    messageType: '',\n  };\n\n  constructor(props, constraints) {\n    super(props);\n    this.constraints = constraints;\n    this.form = this.mapConstraintsToForm(constraints);\n  }\n\n  mapConstraintsToForm(constraints) {\n    const form = {};\n    Object.keys(constraints).forEach((key) => {\n      form[key] = '';\n    });\n    return form;\n  }\n\n  validateForm() {\n    const error = validate(this.form, this.state, this.constraints);\n    this.setState(error);\n    return Object.values(error).some((s) => !!s);\n  }\n\n  renderLoader() {\n    return (\n      <LoaderContent>\n        <CircularProgress size={55} />\n      </LoaderContent>\n    );\n  }\n\n  renderMessage() {\n    const {message, messageType} = this.state;\n    if (!message) {\n      return undefined;\n    }\n\n    return <Message message={message} type={messageType} />;\n  }\n}\n\nexport default BaseComponent;\n","import React from 'react';\nimport styled from 'styled-components';\nimport MuiCard from '@material-ui/core/Card';\nimport MuiCardContent from '@material-ui/core/CardContent';\nimport {API_URL} from '../helpers/Global';\nimport BaseComponent from '../shared/BaseComponent';\nimport Typography from '@material-ui/core/Typography';\nimport moment from 'moment';\n\nconst Content = styled.div({\n  maxWidth: 600,\n  margin: '24px auto',\n});\n\nconst Card = styled(MuiCard)({\n  padding: 8,\n  marginBottom: 20,\n});\n\nconst CardContent = styled(MuiCardContent)({\n\n});\n\nconst SubTitle = styled(Typography)({\n  fontSize: 16,\n  color: 'rgba(0,0,0, .6)',\n  marginBottom: 5\n})\n\nconst CreatedDate = styled(Typography)({\n  marginTop: 25,\n});\n\nconst Rule = styled.li({\n  color: 'rgba(0,0,0, .5)',\n  lineHeight: '1.8'\n});\n\nconst Price = styled(Typography)({\n  marginBottom: 16,\n});\n\nclass JobsPage extends BaseComponent {\n\n  state = {\n    customers: []\n  }\n\n  constructor(props) {\n    super(props, {});\n  }\n\n  async componentDidMount() {\n    this.setState({loading: true});\n    const [customers, ads] = await Promise.all(\n      [this.fetchCustomers(), this.fetchAds()]\n    );\n\n    this.setState({loading: false, customers, ads});\n  }\n\n  async fetchCustomers() {\n    try {\n      const response = await fetch(`${API_URL}customers`);\n      return await response.json();\n    } catch (ex) {\n      // todo : error \n      return [];\n    }\n  }\n\n  async fetchAds() {\n    try {\n      const response = await fetch(`${API_URL}ads`);\n      return await response.json();\n    } catch (ex) {\n      // todo : error \n      return [];\n    }\n  }\n\n  findAd(id) {\n    const {ads} = this.state;\n    return ads.find(ad => ad.id === id);\n  }\n\n\n  renderRuleAds(rule) {\n    const {ads, deal, discount, bundle} = rule;\n    const ad = this.findAd(ads);\n    const {name, price} = ad;\n    if (deal) {\n      return `Get a ${deal.get} for ${deal.replace} deal on ${name}s`;\n    }\n\n    if (discount) {\n      return `Get a discount on ${name}s where the price drops to $${price - discount} per ad`;\n    }\n\n    if (bundle) {\n      return `Get a discount on ${name}s when ${bundle.qty} or more are purchased. The price drops to $${price - bundle.discount} per ad`;\n    }\n\n    return '';\n  }\n\n\n  renderRules(rules) {\n    if (!rules || rules.length === 0) {\n      return <SubTitle>Rules: None</SubTitle>\n    }\n\n    return (\n      <div>\n        <SubTitle>Rules: </SubTitle>\n        <ul>\n          {rules.map(rule => (\n            <Rule key={rule.ads}>\n              {this.renderRuleAds(rule)}\n            </Rule>\n          ))}\n        </ul>\n      </div>\n    )\n  }\n\n  renderCustomer(cust) {\n    const {id, name, adIds, createdAt, rules, totalAmount} = cust;\n    return (\n      <Card key={id}>\n        <CardContent>\n          <Typography variant=\"h5\" component=\"h2\" gutterBottom>{name}</Typography>\n          <Price color=\"primary\" variant=\"b\" component=\"b\">Total: {totalAmount}</Price>\n          <SubTitle>{adIds.map(id => this.findAd(id).name).join(', ')}</SubTitle>\n          {this.renderRules(rules)}\n          <CreatedDate component=\"p\" color=\"textSecondary\">Created At: {moment(createdAt).format(\"LL\")}</CreatedDate>\n        </CardContent>\n      </Card>\n    )\n  }\n\n\n  renderCustomers() {\n    const {customers} = this.state;\n    return (\n      <Content>\n        {customers.map(cust => this.renderCustomer(cust))}\n      </Content>\n    );\n  }\n\n  render() {\n    const {loading} = this.state;\n    return (\n      loading ? this.renderLoader() : this.renderCustomers()\n    );\n  }\n}\n\nexport default JobsPage;\n","import React, {Component} from 'react';\nimport styled from 'styled-components';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\nimport MuiDivider from '@material-ui/core/Divider';\n\n\nconst SubTitle = styled(Typography)({\n  color: \"#9e9e9e\",\n  marginTop: 20,\n});\n\nconst Divider = styled(MuiDivider)({\n  margin: '20px 0',\n})\n\n\nclass CofirmationDialog extends Component {\n\n  state = {\n    open: false,\n    total: 0,\n  };\n\n\n  async componentDidMount() {\n    const {total, customer} = this.props;\n    this.setState({\n      total,\n      customer,\n      open: true\n    })\n  }\n\n  handleClickOpen() {\n    this.setState({open: true});\n  }\n\n  handleClose() {\n    this.setState({open: false});\n  }\n\n  submit() {\n    const {submit} = this.props;\n    submit && submit();\n    this.handleClose();\n  }\n\n  render() {\n    const {customer, open, total} = this.state;\n    if (!customer) {\n      return (<div></div>);\n    }\n\n    const {name, adIds} = customer;\n    return (\n      <Dialog\n        open={open}\n        onClose={() => this.handleClose()}\n      >\n        <DialogTitle>Hi {name}, Are you sure to check out now?</DialogTitle>\n        <DialogContent>\n          <SubTitle variant=\"h6\" component=\"p\">\n            <b>SKUs: </b> {adIds.join(', ')}\n          </SubTitle>\n          <Divider />\n          <Typography variant=\"h5\" component=\"h5\">\n            <b>Total: </b> ${total}\n          </Typography>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={() => this.handleClose()} color=\"primary\">\n            Maybe Later\n            </Button>\n          <Button onClick={() => this.submit()} color=\"primary\" autoFocus>\n            Checkout\n            </Button>\n        </DialogActions>\n      </Dialog>\n    );\n  }\n}\n\nexport default CofirmationDialog;","import React from 'react';\nimport styled from 'styled-components';\nimport TextField from '@material-ui/core/TextField';\nimport MuiDivider from '@material-ui/core/Divider';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport OutlinedInput from '@material-ui/core/OutlinedInput';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport IconButton from '@material-ui/core/IconButton';\nimport DeleteIcon from '@material-ui/icons/Delete';\n\nimport BaseComponent from '../shared/BaseComponent';\nimport {createFormError} from '../helpers/Form';\nimport {API_URL} from '../helpers/Global';\n\nconst InputsContent = styled.div({\n  display: 'grid',\n  gridTemplateColumns: '1fr 1fr',\n  gridGap: 12\n});\n\nconst AdsContent = styled.div({\n  display: 'flex',\n  alignItems: 'center',\n  justifyContent: 'center'\n});\n\nconst DeleteButton = styled(IconButton)({\n  width: 50,\n  height: 50,\n  marginLeft: 10\n})\n\nconst Divider = styled(MuiDivider)({\n  margin: '12px 0 ',\n})\n\nexport const RULE = {\n  GET_X_FOR_Y: 1,\n  DISCOUNT: 2,\n  BUNDLE_SET: 3\n}\nconst RULES = [{\n  value: RULE.GET_X_FOR_Y,\n  text: 'Get X For Y'\n}, {\n  value: RULE.DISCOUNT,\n  text: 'Discount'\n}, {\n  value: RULE.BUNDLE_SET,\n  text: 'Bundle Set'\n}];\n\nclass Rules extends BaseComponent {\n\n  state = {\n    ads: [],\n    rule: this.getDefaultRule(),\n    ad: ''\n  }\n\n  form = {\n    name: ''\n  };\n  formError = {};\n\n  constructor(props) {\n    super(props, constraints);\n    this.formError = createFormError(this.form);\n\n    this.state = {\n      ...this.form,\n      ...super.state,\n      ...this.state,\n    };\n  }\n\n  componentWillReceiveProps(nextProps) {\n    const {value} = nextProps;\n    const {value: val} = this.props;\n    if (value !== val) {\n      const {rule, ad} = value;\n      this.setState({rule, ad});\n    }\n  }\n\n  async componentDidMount() {\n    const ads = await this.fetchAds();\n    let {value} = this.props;\n\n    value = value || {\n      rule: this.getDefaultRule(),\n      ad: ads[0].id\n    };\n    const {rule, ad} = value;\n    this.setState({ads, rule, ad});\n  }\n\n  getDefaultRule() {\n    return {\n      mode: RULES[0].value,\n      value1: '',\n      value2: '',\n    }\n  }\n\n  async fetchAds() {\n    try {\n      const response = await fetch(`${API_URL}ads`);\n      return await response.json();\n    } catch (ex) {\n      // todo : error \n      return [];\n    }\n  }\n\n  renderPriceRule() {\n    const {rule} = this.state;\n    const {mode} = rule;\n\n    return (\n      <FormControl fullWidth variant=\"outlined\" margin=\"normal\" >\n        <InputLabel>Rules</InputLabel>\n        <Select\n          value={mode}\n          onChange={({target}) => {\n            rule.mode = target.value;\n            this.ruleChanged(rule);\n          }}\n          input={<OutlinedInput labelWidth={40} />}>\n          {RULES.map(r => (<MenuItem key={r.value} value={r.value}>{r.text}</MenuItem>))}\n        </Select>\n      </FormControl >\n    )\n  }\n\n  renderPriceScenario() {\n    const {rule} = this.state;\n    const {mode} = rule;\n\n    switch (mode) {\n      case RULE.GET_X_FOR_Y:\n        return this.renderBothInputs(['Get X', 'For Y']);\n\n      case RULE.DISCOUNT:\n        return this.renderDiscountInputs();\n\n      case RULE.BUNDLE_SET:\n        return this.renderBothInputs(['More than', 'Discount']);\n\n      default:\n        throw new Error(`${mode} is not avialable`);\n    }\n\n  }\n\n  renderBothInputs(labels) {\n    const {rule} = this.state;\n    const {value1, value2} = rule;\n    return (\n      <InputsContent>\n        <TextField\n          value={value1}\n          onChange={({target}) => {\n            rule.value1 = target.value;\n            this.ruleChanged(rule);\n          }}\n          margin=\"normal\"\n          label={labels[0]}\n          variant=\"outlined\"\n        />\n        <TextField\n          value={value2}\n          onChange={({target}) => {\n            rule.value2 = target.value;\n            this.ruleChanged(rule);\n          }}\n          margin=\"normal\"\n          label={labels[1]}\n          variant=\"outlined\"\n        />\n      </InputsContent>\n    )\n  }\n\n  renderDiscountInputs() {\n    const {rule} = this.state;\n    const {value1, value1Error} = rule;\n    return (\n      <TextField\n        error={!!value1Error}\n        helperText={value1Error}\n        value={value1}\n        onChange={({target}) => {\n          rule.value1 = target.value;\n          this.ruleChanged(rule);\n        }}\n        margin=\"normal\"\n        label=\"Discount\"\n        variant=\"outlined\"\n      />);\n  }\n\n  renderAds() {\n    const {ad, ads} = this.state;\n    return (\n      <AdsContent>\n        <FormControl fullWidth variant=\"outlined\" margin=\"normal\" >\n          <InputLabel>Ads</InputLabel>\n          <Select\n            value={ad}\n            onChange={(event) => this.adChanged(event.target.value)}\n            input={<OutlinedInput labelWidth={28} />}>\n            {ads.map(ad => (<MenuItem key={ad.id} value={ad.id}>{ad.name}</MenuItem>))}\n          </Select>\n        </FormControl>\n        <DeleteButton onClick={() => this.removeRule()}>\n          <DeleteIcon />\n        </DeleteButton>\n      </AdsContent>\n    );\n  }\n\n  renderAdContent() {\n    const {ad, ads} = this.state;\n    const found = ads.find(s => s.id === ad);\n    if (!found) {\n      return;\n    }\n\n    const {price, maxLength, allowLogo, priority} = found;\n    return (\n      <ul>\n        <li>Price : ${price}</li>\n        <li>Description max characters: {maxLength}</li>\n        {allowLogo && <li>Able to upload company logo</li>}\n        {priority && <li>Higher Visibility</li>}\n      </ul>\n    );\n  }\n\n  onChange(e) {\n    const {onChange} = this.props;\n    onChange && onChange(e);\n  }\n\n  adChanged(ad) {\n    const {rule} = this.state;\n    this.setState({ad})\n    this.onChange({ad, rule});\n  }\n\n\n  ruleChanged(rule) {\n    const {ad} = this.state;\n    this.setState({rule});\n    this.onChange({ad, rule});\n  }\n\n  removeRule() {\n    const {remove} = this.props;\n    remove && remove();\n  }\n\n  render() {\n    return (\n      <div>\n        {this.renderAds()}\n        {this.renderAdContent()}\n        {this.renderPriceRule()}\n        {this.renderPriceScenario()}\n        <Divider />\n      </div>\n    );\n  }\n}\n\nexport default Rules;\n\n\nconst constraints = {\n  name: {\n    presence: {allowEmpty: false},\n  }\n};\n","import React, {Component} from 'react';\nimport styled from 'styled-components';\nimport Button from '@material-ui/core/Button';\n\nimport Rules, {RULE} from './Rules';\n\nconst MainButton = styled(Button)({\n  marginTop: 15,\n  marginBottom: 10,\n  marginRight: 20\n});\n\nclass RulesForm extends Component {\n\n  state = {\n    rules: []\n  }\n\n  componentWillReceiveProps(nextProps) {\n    const {rules} = nextProps;\n    const {rules: rls} = this.props;\n    if (rules !== rls) {\n      this.setState({rules});\n    }\n  }\n\n  componentDidMount() {\n    const {rules} = this.props;\n    console.log(rules);\n    this.setState({rules});\n  }\n\n  addRule() {\n    const {rules} = this.state;\n    rules.push(undefined);\n    this.setState({rules});\n  }\n\n  removeRule(index) {\n    const {rules} = this.state;\n    rules.splice(index, 1);\n    this.setState({rules});\n  }\n\n  ruleChanged(rule, index) {\n    const {rules} = this.state;\n    console.log('change', rule);\n    rules[index] = rule;\n    this.setState({rules});\n  }\n\n  back() {\n    const {back} = this.props;\n    back && back();\n  }\n\n  preparePriceRules() {\n    const {rules} = this.state;\n\n    return rules.map(r => {\n      const {ad, rule} = r;\n      return {\n        ads: ad,\n        ...this.prepareRule(rule)\n      }\n    });\n  }\n\n  prepareRule(rule) {\n    const {mode, value1, value2} = rule;\n    switch (mode) {\n      case RULE.GET_X_FOR_Y:\n        return {\n          deal: {\n            get: value1,\n            replace: value2\n          }\n        };\n\n      case RULE.DISCOUNT:\n        return {discount: value1};\n\n      case RULE.BUNDLE_SET:\n        return {\n          bundle: {\n            qty: value1,\n            discount: value2\n          }\n        };\n\n      default:\n        return {};\n    }\n  }\n\n  addedRule(e) {\n    e.preventDefault();\n\n    const {onSubmit} = this.props;\n    const {rules} = this.state;\n\n    onSubmit && onSubmit({\n      rules,\n      request: this.preparePriceRules()\n    });\n  }\n\n  render() {\n    const {rules} = this.state;\n    return (\n      <div>\n        <MainButton color=\"primary\" onClick={() => this.addRule()} >Add Ad Rule</MainButton>\n        <form onSubmit={e => this.addedRule(e)}>\n          {rules.map((rule, index) => <Rules key={index}\n            value={rule}\n            remove={() => this.removeRule(index)}\n            onChange={(e) => this.ruleChanged(e, index)} />)}\n          <div>\n            <MainButton onClick={() => this.back()}>Back</MainButton>\n            <MainButton variant=\"contained\" color=\"primary\" type=\"submit\">Next</MainButton>\n          </div>\n        </form>\n      </div>\n    );\n  }\n}\n\nexport default RulesForm;","import React, {Component} from 'react';\nimport styled from 'styled-components';\nimport TextField from '@material-ui/core/TextField';\nimport IconButton from '@material-ui/core/IconButton';\nimport AddIcon from '@material-ui/icons/Add';\nimport RemoveIcon from '@material-ui/icons/Remove';\n\n\nconst iconButtonSize = 56;\n\n\nconst InputContent = styled.div({\n  position: 'relative',\n});\n\n\nconst AddButton = styled(IconButton)({\n  position: 'absolute',\n  top: 0,\n  right: 0,\n  height: iconButtonSize,\n  width: iconButtonSize,\n});\n\nconst MinusButton = styled(IconButton)({\n  position: 'absolute',\n  top: 0,\n  right: 50,\n  height: iconButtonSize,\n  width: iconButtonSize,\n});\n\n\n\nclass NumericInput extends Component {\n\n  state = {\n    value: 0,\n  }\n\n  componentDidMount() {\n    const {value} = this.props;\n    if (value) {\n      this.setState({value});\n    }\n  }\n\n  componentWillReceiveProps(nextProps) {\n    const {value} = nextProps;\n    const {value: val} = this.props;\n\n    if (value !== val) {\n      this.setState({value});\n    }\n  }\n\n\n  onChange(value) {\n    const {onChange} = this.props;\n    onChange && onChange(value);\n  }\n\n  plus() {\n    let {value} = this.state;\n    value += 1;\n    this.setState({value});\n    this.onChange(value);\n  }\n\n  minus() {\n    let {value} = this.state;\n    value = Math.max(value - 1, 0);\n    this.setState({value});\n    this.onChange(value);\n  }\n\n\n  render() {\n    const {helperText, error, label} = this.props;\n    const {value} = this.state;\n    return (\n      <InputContent>\n        <TextField\n          fullWidth\n          error={error}\n          helperText={helperText}\n          value={value}\n          onChange={(event) => this.onChange(event.target.value)}\n          label={label}\n          InputProps={{\n            readOnly: true,\n          }}\n          variant=\"outlined\"\n        />\n        <AddButton size=\"small\" onClick={() => this.plus()}>\n          <AddIcon />\n        </AddButton>\n        <MinusButton size=\"small\" onClick={() => this.minus()}>\n          <RemoveIcon />\n        </MinusButton>\n      </InputContent>\n    );\n  }\n}\n\nexport default NumericInput;\n","import React, {Component} from 'react';\nimport styled from 'styled-components';\nimport Button from '@material-ui/core/Button';\nimport NumericInput from '../shared/NumericInput';\nimport Typography from '@material-ui/core/Typography';\nimport {API_URL} from '../helpers/Global';\n\nconst MainButton = styled(Button)({\n  marginTop: 15,\n  marginBottom: 10,\n  marginRight: 20\n});\n\nconst AdContent = styled.div({\n  display: 'grid',\n  gridTemplateColumns: '1fr 1fr',\n  gridGap: 10,\n  marginBottom: 20,\n  justifyItems: 'center',\n  alignItems: 'center'\n});\n\nclass ProductsForm extends Component {\n\n  state = {\n    ads: []\n  }\n\n  componentWillReceiveProps(nextProps) {\n    const {ads} = nextProps;\n    const {ads: as} = this.props;\n    if (ads !== as) {\n      this.setState({ads});\n    }\n  }\n\n  async componentDidMount() {\n    let {ads} = this.props;\n    ads = ads.length ? ads : await this.fetchAds();\n    this.setState({ads});\n  }\n\n  async fetchAds() {\n    try {\n      const response = await fetch(`${API_URL}ads`);\n      const ads = await response.json();\n\n      return ads.map(s => {\n        s.qty = 0;\n        return s;\n      });\n    } catch (ex) {\n      // todo : error \n    }\n  }\n\n\n  back() {\n    const {back} = this.props;\n    back && back();\n  }\n\n  updateAdValue(qty, index) {\n    const {ads} = this.state;\n    ads[index].qty = qty;\n    this.setState({ads});\n\n  }\n\n  async checkOut(e) {\n    const {onSubmit, onChange} = this.props;\n    const {ads} = this.state;\n    onChange && onChange({\n      ads,\n      request: ads.reduce((prev, ad) => prev.concat(new Array(ad.qty).fill(ad.id)), [])\n    });\n    onSubmit && onSubmit(e);\n  }\n\n  render() {\n    const {ads} = this.state;\n    return (\n      <form onSubmit={e => this.checkOut(e)}>\n        {ads.map((ad, index) => (\n          <AdContent key={ad.id}>\n            <Typography>{ad.name}</Typography>\n            <NumericInput label=\"qty\" value={ad.qty} onChange={(value) => this.updateAdValue(value, index)} />\n          </AdContent>\n        ))}\n        <div>\n          <MainButton onClick={() => this.back()}>Back</MainButton>\n          <MainButton variant=\"contained\" color=\"primary\" type=\"submit\">Check Out</MainButton>\n        </div>\n      </form>\n    );\n  }\n}\n\nexport default ProductsForm;","import React from 'react';\nimport styled from 'styled-components';\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\nimport BaseComponent from '../shared/BaseComponent';\nimport {createFormError} from '../helpers/Form';\n\nconst MainButton = styled(Button)({\n  marginTop: 15,\n  marginBottom: 10,\n  marginRight: 20\n});\n\nclass CustomerForm extends BaseComponent {\n\n  state = {\n    name: '',\n    nameError: '',\n  }\n\n  form = {\n    name: ''\n  };\n  formError = {};\n\n  constructor(props) {\n    super(props, constraints);\n    this.formError = createFormError(this.form);\n\n    this.state = {\n      ...this.form,\n      ...super.state,\n      ...this.state,\n    };\n  }\n\n  componentWillReceiveProps(nextProps) {\n    const {name} = nextProps;\n    const {name: nm} = this.props;\n    if (name !== nm) {\n      this.setState({name});\n    }\n  }\n\n  async componentDidMount() {\n    let {name} = this.props;\n    this.setState({name});\n  }\n\n  back() {\n    const {back} = this.props;\n    back && back();\n  }\n\n  addCustomer(e) {\n    e.preventDefault();\n    if (this.validateForm()) {\n      return;\n    }\n\n    const {onSubmit} = this.props;\n    const {name} = this.state;\n    onSubmit && onSubmit({name});\n  }\n\n  render() {\n    const {name, nameError} = this.state;\n    return (\n      <form onSubmit={(e) => this.addCustomer(e)}>\n        <TextField\n          fullWidth\n          error={!!nameError}\n          helperText={nameError}\n          value={name}\n          onChange={({target}) => this.setState({name: target.value})}\n          margin=\"normal\"\n          label=\"Customer Name\"\n          variant=\"outlined\"\n        />\n        <MainButton variant=\"contained\" color=\"primary\" type=\"submit\"> Next</MainButton>\n      </form>\n    );\n  }\n}\n\nexport default CustomerForm;\n\nconst constraints = {\n  name: {\n    presence: {allowEmpty: false},\n  }\n};\n","import React from 'react';\nimport styled from 'styled-components';\nimport Typography from '@material-ui/core/Typography';\nimport MuiPaper from '@material-ui/core/Paper';\n\nimport Stepper from '@material-ui/core/Stepper';\nimport Step from '@material-ui/core/Step';\nimport StepLabel from '@material-ui/core/StepLabel';\nimport StepContent from '@material-ui/core/StepContent';\n\nimport BaseComponent from '../shared/BaseComponent';\n\nimport {API_URL} from '../helpers/Global';\nimport CofirmationDialog from './Confirmations';\nimport RulesForm from './RulesForm';\nimport ProductsForm from './ProductsForm';\nimport CustomerForm from './CustomerForm';\n\nconst Content = styled(MuiPaper)({\n  maxWidth: 600,\n  margin: '24px auto',\n  padding: 24,\n});\n\nclass CustomerAddPage extends BaseComponent {\n\n  state = {\n    step: 0,\n    rules: [],\n    ads: [],\n    customer: {},\n    loading: false,\n    confirmation: false\n  }\n\n  constructor(props) {\n    super(props, {});\n  }\n\n  back() {\n    const {step} = this.state;\n    this.setState({step: step - 1});\n  }\n\n  addedRules(event) {\n    const {rules, request} = event;\n    const {customer} = this.state;\n    customer.rules = request;\n    this.setState({rules, customer, step: 2});\n  }\n\n  updatedAds(event) {\n    const {ads, request} = event;\n    const {customer} = this.state;\n    customer.adIds = request;\n    this.setState({ads, customer});\n  }\n\n  addCustomer(event) {\n    const {name} = event;\n    const {customer} = this.state;\n    customer.name = name;\n    this.setState({name, customer, step: 1});\n  }\n\n  async checkOut(e) {\n    e.preventDefault();\n\n    this.setState({\n      loading: true\n    })\n\n    const total = await this.fetchTotal();\n\n    this.setState({\n      loading: false,\n      confirmation: true,\n      total,\n    })\n  }\n\n  async submit() {\n    try {\n\n      await this.postCustomer();\n\n      this.setState({\n        message: 'Customer added!',\n      });\n\n      const {history} = this.props;\n      history.push('/');\n\n    } catch (ex) {\n      this.setState({\n        message: 'Ops! Unable to add customer',\n        type: 'error'\n      });\n    }\n  }\n\n  async fetchTotal() {\n    try {\n      const {name, customer} = this.state;\n      const response = await fetch(`${API_URL}customer/total`, {\n        method: 'POST',\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({name, ...customer})\n      });\n      const {total} = await response.json();\n      return total;\n    } catch (ex) {\n      // todo: error\n    }\n  }\n\n  async postCustomer() {\n    try {\n      const {name, customer} = this.state;\n      await fetch(`${API_URL}customer`, {\n        method: 'POST',\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({name, ...customer})\n      });\n    } catch (ex) {\n      // todo: error\n    }\n  }\n\n  renderStepper() {\n    const {step} = this.state;\n\n    return (\n      <Stepper activeStep={step} orientation=\"vertical\">\n        {this.renderCustomerForm()}\n        {this.renderRulesForm()}\n        {this.renderProductsForm()}\n      </Stepper>\n    );\n  }\n\n  renderCustomerForm() {\n    const {name} = this.state;\n    return (\n      <Step>\n        <StepLabel>Enter Customer Detail</StepLabel>\n        <StepContent>\n          <CustomerForm\n            name={name}\n            back={() => this.back()}\n            onSubmit={(e) => this.addCustomer(e)} />\n        </StepContent>\n      </ Step>\n    );\n  }\n\n  renderRulesForm() {\n    const {rules} = this.state;\n    return (\n      <Step>\n        <StepLabel>Add Pricing Rules</StepLabel>\n        <StepContent>\n          <RulesForm\n            rules={rules}\n            back={() => this.back()}\n            onSubmit={(e) => this.addedRules(e)} />\n        </StepContent>\n      </ Step>\n    );\n  }\n\n  renderProductsForm() {\n    const {ads} = this.state;\n    return (\n      <Step>\n        <StepLabel>Select Ad Products</StepLabel>\n        <StepContent>\n          <ProductsForm\n            ads={ads}\n            back={() => this.back()}\n            onSubmit={(e) => this.checkOut(e)}\n            onChange={(e) => this.updatedAds(e)} />\n        </StepContent>\n      </ Step>\n    );\n  }\n\n  renderForm() {\n    const {confirmation, total, customer} = this.state;\n    return (\n      <Content elevation={1}>\n        <Typography variant=\"h6\" component=\"h6\">Add Customer</Typography>\n        {this.renderStepper()}\n        {confirmation && <CofirmationDialog open={confirmation} total={total} customer={customer} submit={() => this.submit()} />}\n        {this.renderMessage()}\n      </Content>\n    );\n  }\n\n  render() {\n    const {loading} = this.state;\n    return loading ? this.renderLoader() : this.renderForm();\n  }\n}\n\nexport default CustomerAddPage;\n\n","import React, {Component} from 'react';\nimport {BrowserRouter as Router, Route} from 'react-router-dom';\nimport JssProvider from 'react-jss/lib/JssProvider';\nimport {create} from 'jss';\nimport {createGenerateClassName, jssPreset} from '@material-ui/core/styles';\nimport styled from 'styled-components';\nimport NavBar from './shared/NavBar';\nimport CustomersPage from './list/Customers';\nimport CustomerAddPage from './add/CustomerAdd';\n\nconst generateClassName = createGenerateClassName();\nconst jss = create({\n  ...jssPreset(),\n  insertionPoint: document.getElementById('jss-insertion-point'),\n});\n\nconst Root = styled.div({\n\n})\n\n\nclass App extends Component {\n  render() {\n    return (\n      <JssProvider jss={jss} generateClassName={generateClassName}>\n        <Router>\n          <Root>\n            <NavBar />\n\n            <Route exact path=\"/\" component={CustomersPage} />\n            <Route path=\"/add\" component={CustomerAddPage} />\n          </Root>\n        </Router>\n      </JssProvider>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}